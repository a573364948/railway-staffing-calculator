# 定员规则配置页面

## 功能概述

定员规则配置页面是一个专门用于配置各铁路局客运乘务定员标准的管理界面。该页面采用分离式设计，将规则配置与实际计算分离，提供了灵活、可扩展的定员标准管理能力。

## 主要功能

### 1. 铁路局标准管理
- **预设标准**：内置北京局、广州局等主要铁路局的定员标准
- **自定义标准**：支持创建新的铁路局标准
- **标准复制**：基于现有标准快速创建新标准
- **标准编辑**：修改现有标准的各项配置

### 2. 基础配置
- **标准名称**：如"北京局标准"
- **所属铁路局**：选择对应的铁路局
- **标准工时**：设置月度标准工时（如166.6小时）
- **预备率配置**：分别设置主要生产组和其余生产的预备率

### 3. 高铁定员规则配置
- **匹配条件**：
  - 车型：如CR200J、CRH380D等
  - 编组：如短编组、长编组、8编组、16编组等
  - 运行时间：设置最小/最大运行时间范围
  - 特殊类型：如动卧、商务座等
- **人员配置**：
  - 列车长：配置人数
  - 列车员：配置人数
  - 商务座服务员：可选配置
  - 餐服人员：可选配置

### 4. 普速定员规则配置
- **匹配条件**：
  - 列车类别：如国际联运、直通等
  - 运行时间：设置时间范围
  - 车厢类型：如硬座、硬卧、软卧等
- **人员配置**：
  - 基础人员：列车长、列车值班员、行李员等
  - 车厢配置：按车厢类型设置人员比例
    - 硬座车：如"1人/车"
    - 软座车：如"1人/车"
    - 硬卧车：如"1人/车"或"3人/2车"
    - 软卧车：如"1人/车"

### 5. 其余生产规则配置
- **配置方式**：
  - 按比例：如主要生产组的5%
  - 固定人数：设置固定的人员数量
  - 自定义公式：使用公式计算
- **具体岗位**：可配置具体的岗位和人数

## 预设标准

### 北京局标准
- **标准工时**：166.6小时/月
- **预备率**：主要生产组8%，其余生产6%
- **特色规则**：
  - 普速列车24小时以上硬卧车按"3人/2车"配置
  - 动车组按编组和运行时间细化配置

### 广州局标准
- **标准工时**：174小时/月
- **预备率**：主要生产组8%，其余生产5%
- **特色规则**：
  - 采用效率定员与岗位定员结合模式
  - 8编组12小时以下配置相对简化

## 技术特点

### 1. 分离式架构
- **配置页面**：专注于规则的精确配置
- **计算页面**：专注于高效的计算和展示
- **数据持久化**：使用localStorage保存配置

### 2. 灵活的规则匹配
- **多条件匹配**：支持多个条件的组合匹配
- **优先级排序**：按匹配度评分选择最佳规则
- **条件验证**：自动检测规则冲突和完整性

### 3. 用户友好的界面
- **卡片式布局**：清晰的功能区域划分
- **折叠面板**：节省空间的展示方式
- **实时预览**：配置变更的即时反馈

## 使用流程

1. **选择或创建标准**
   - 从现有标准中选择
   - 或点击"新建标准"创建新的标准

2. **配置基础信息**
   - 设置标准名称和所属铁路局
   - 配置标准工时和预备率

3. **配置定员规则**
   - 高铁规则：按编组和运行时间配置
   - 普速规则：按运行时间和车厢类型配置
   - 其余生产：按比例或固定人数配置

4. **保存和验证**
   - 保存配置的规则
   - 系统自动验证规则完整性

## 扩展性

### 1. 新增铁路局
- 轻松添加新的铁路局标准
- 支持复制现有标准作为模板

### 2. 规则演进
- 支持复杂规则的逐步完善
- 版本管理和历史追溯

### 3. 集成能力
- 与定员测算页面无缝集成
- 支持规则的导入导出

## 数据结构

配置的规则数据包括：
- **StaffingStandard**：定员标准主体
- **HighSpeedStaffingRule**：高铁定员规则
- **ConventionalStaffingRule**：普速定员规则
- **OtherProductionRule**：其余生产规则

所有配置数据自动保存到浏览器本地存储，确保配置的持久性。
